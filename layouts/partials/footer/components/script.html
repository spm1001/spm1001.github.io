{{/* This partial includes theme's original scripts but eliminates vibrant.js */}}

{{- $opts := dict "minify" hugo.IsProduction -}}
{{- $script := resources.Get "ts/main.ts" | js.Build $opts | fingerprint -}}

<script type="text/javascript" src="{{ $script.RelPermalink }}" defer></script>

{{- with resources.Get "ts/custom.ts" -}}
    {{/* Place your custom script in HUGO_SITE_FOLDER/assets/ts/custom.ts */}}
    {{- $customScript := . | js.Build $opts | fingerprint -}}
    <script type="text/javascript" src="{{ $customScript.RelPermalink }}" defer></script>
{{- end -}}

{{/* Additional hamburger toggle functionality */}}
<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function () {
        var toggleMenuButton = document.getElementById("toggle-menu");
        var mainMenu = document.getElementById("main-menu");

        if (toggleMenuButton && mainMenu) {
            toggleMenuButton.addEventListener("click", function () {
                var isExpanded =
                    this.getAttribute("aria-expanded") === "true" || false;
                this.setAttribute("aria-expanded", !isExpanded);
                this.classList.toggle("is-active"); // For color and any simple CSS state
                mainMenu.classList.toggle("show"); // For showing/hiding the menu
            });
        }
    });
</script>
